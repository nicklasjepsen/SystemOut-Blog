<?xml version="1.0" encoding="utf-8" standalone="yes" ?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom">
  <channel>
    <title>Guide on SystemOut</title>
    <link>http://systemout.net/tags/guide/</link>
    <description>Recent content in Guide on SystemOut</description>
    <generator>Hugo -- gohugo.io</generator>
    <language>en-us</language>
    <managingEditor>nmj@systemout.net (Nicklas Møller Jepsen)</managingEditor>
    <webMaster>nmj@systemout.net (Nicklas Møller Jepsen)</webMaster>
    <lastBuildDate>Tue, 15 Jul 2014 00:00:00 +0000</lastBuildDate>
    <atom:link href="http://systemout.net/tags/guide/index.xml" rel="self" type="application/rss+xml" />
    
    <item>
      <title>SignalR Hub Reference - done right!</title>
      <link>http://systemout.net/2014/07/15/signalr-hub-reference-done-right/</link>
      <pubDate>Tue, 15 Jul 2014 00:00:00 +0000</pubDate>
      <author>nmj@systemout.net (Nicklas Møller Jepsen)</author>
      <guid>http://systemout.net/2014/07/15/signalr-hub-reference-done-right/</guid>
      <description>

&lt;p&gt;UPDATE: I have now written a complete SignalR tutorial, see this post: &lt;a href=&#34;http://systemout.net/2014/07/17/developing-and-deploying-a-signalr-chat-web-app-to-iis/&#34;&gt;http://systemout.net/2014/07/17/developing-and-deploying-a-signalr-chat-web-app-to-iis/&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;SignalR is nice. No doubt about that. But it is very much immature, not the framework, more the tutorials, guidelines, etc.&lt;/p&gt;

&lt;p&gt;I have been strugling a bit with the Javascript/client setup of the hub connection - especially when deploying to an IIS 8 in production, where all the magic stopped to happen. There is not much to gain from WebSockets, if the connection can&amp;rsquo;t be opened because the scripts won&amp;rsquo;t load.&lt;/p&gt;

&lt;p&gt;Any way, in an ASP.NET Web Application using SignalR with a generated hub proxy you need the following things to be able to make the connection:
OWIN Startup.cs (Add &amp;gt; New Item &amp;gt; Owin Startup):&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;using Microsoft.AspNet.SignalR;
using Microsoft.Owin;
using Owin;

[assembly: OwinStartup(typeof(SystemOut.Gateway.WebApp.Startup))]

namespace SystemOut.Gateway.WebApp
{
    public class Startup
    {
        public void Configuration(IAppBuilder app)
        {
            // For more information on how to configure your application, visit http://go.microsoft.com/fwlink/?LinkID=316888
            app.MapSignalR(&amp;quot;/~/signalr&amp;quot;, new HubConfiguration());
        }
    }
}
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;&lt;strong&gt;NOTICE&lt;/strong&gt; the &amp;ldquo;/~/signalr - this is needed, if you, as I, are running the site in your production environment as a sub directory for the main site.&lt;/p&gt;

&lt;p&gt;Because of this, you need to reference the generated SignalR proxy a little different than most samples I came across do:&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;&amp;lt;script src=&amp;quot;~/signalr/js&amp;quot;&amp;gt;&amp;lt;/script&amp;gt;
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;You also need to create the hub connection a little bit different, in your scripts:&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;$.connection.hub.start(&amp;quot;~/signalr&amp;quot;)
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;That should do it!&lt;/p&gt;

&lt;p&gt;Remember, you can always enable logging to the browsers console (F12) by adding this line:&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;$.connection.hub.logging = true;
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;just before:&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;$.connection.hub.start(&amp;quot;~/signalr&amp;quot;)
&lt;/code&gt;&lt;/pre&gt;

&lt;h4 id=&#34;the-trouble:8ee58b73c21ae6829694450168d54780&#34;&gt;The trouble&lt;/h4&gt;

&lt;p&gt;Before settings things up this way, I received a &amp;ldquo;Unable to get property &amp;lsquo;client&amp;rsquo; of undefined or null reference&amp;rdquo; in the IE console when loading the page. In that case, the &amp;ldquo;client&amp;rdquo; referenced was the SignalR client in the Hub.
I investigated it further by looking in Fiddler and in Chrome. In the console in Chrome I got &amp;ldquo;&lt;a href=&#34;http://myip/signalr/js&#34;&gt;http://myip/signalr/js&lt;/a&gt; 404 (Not Found)&amp;rdquo; which lead me to come up with the above solution, becuase I only had the problem when deploying the application to IIS - not when I ran it locally from Visual Studio 2013.&lt;/p&gt;

&lt;p&gt;As an end note; it makes no difference for me whether I use:&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;~/signalr/js 
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;or&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;~/signalr/hubs
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;That&amp;rsquo;s it for now. I&amp;rsquo;m working on a full tutorial to developing AND deploying an ASP.NET Web Application with SignalR, so check back soon! :)&lt;/p&gt;

&lt;p&gt;UPDATE: I have now written a complete SignalR tutorial, see this post: &lt;a href=&#34;http://systemout.net/2014/07/17/developing-and-deploying-a-signalr-chat-web-app-to-iis/&#34;&gt;http://systemout.net/2014/07/17/developing-and-deploying-a-signalr-chat-web-app-to-iis/&lt;/a&gt;&lt;/p&gt;
</description>
    </item>
    
  </channel>
</rss>